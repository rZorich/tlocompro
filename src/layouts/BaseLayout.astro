---
import "../styles/global.css";
//import "../styles/como-funciona.css";

const {
  title = "Tlocompro | Vende tu auto hoy",
  description = "Liquidez inmediata por tu auto, sin tr√°mites ni esperas. Compramos y pagamos tu auto en 24 horas.",
  canonical = "https://tlocompro.cl/"
} = Astro.props;
---

<!doctype html>
  <html lang="es-CL" class="scroll-smooth">
    <head>
      <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1" />
      <meta name="robots" content="index, follow" />
      <meta name="theme-color" content="#0d9488" />

      <title>{title}</title>
      <meta name="description" content={description} />
      <link rel="canonical" href={canonical} />

      <!-- Open Graph -->
      <meta property="og:title" content={title} />
      <meta property="og:description" content={description} />
      <meta property="og:type" content="website" />
      <meta property="og:url" content={canonical} />
      <meta property="og:image" content="https://tlocompro.cl/images/og-default.jpg" />

      <!-- Redes sociales oficiales -->
      <link rel="me" href="https://www.instagram.com/tlocompro_cl" />
      <meta property="og:see_also" content="https://www.instagram.com/tlocompro_cl" />
      <meta property="og:see_also" content="https://www.facebook.com/Tlocompro.cl/" />

      <!-- Twitter Cards -->
      <meta name="twitter:card" content="summary_large_image" />
      <meta name="twitter:title" content={title} />
      <meta name="twitter:description" content={description} />
      <meta name="twitter:image" content="https://tlocompro.cl/images/og-default.jpg" />

      <!-- Favicon -->
      <link rel="icon" href="/favicon.ico" />

      <!-- üîπ OPTIMIZACI√ìN DE FUENTES -->
      <!-- Preconexi√≥n temprana a dominios de fuentes -->
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

      <!-- üîπ Carga no bloqueante de Google Fonts -->
      <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" as="style">
      <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap"
        rel="stylesheet"
        media="print"
        onload="this.media='all'"
      >
      <noscript>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap">
      </noscript>
      <link
        rel="stylesheet"
        href="/_astro/como-funciona.css"
        media="print"
        onload="this.media='all'"
      >
      <noscript>
        <!-- <link rel="stylesheet" href="/_astro/como-funciona.C8vM0CT4.css"> ---- NO MANUAL  -->
        <link rel="stylesheet" href="/_astro/como-funciona.css">
      </noscript>

      <!-- üîπ PRELOAD DE CSS LOCAL (ACELERA LCP) -->
      <!-- <link rel="preload" href="/_astro/como-funciona.C8vM0CT4.css" as="style"> ---- NO MANUAL  -->
      <link rel="preload" href="/_astro/como-funciona.css" as="style">
      <!-- üîπ CARGA DIFERIDA -->
       <!--
      <link
        rel="stylesheet"
        href="/_astro/como-funciona.C8vM0CT4.css"
        media="print"
        onload="this.media='all'"
      >
        -->
      <link
        rel="stylesheet"
        href="/_astro/como-funciona.css"
        media="print"
        onload="this.media='all'"
      >
      
      <!-- üîπ PRELOAD DE IMAGEN PRINCIPAL (LOGO) -->
      <link rel="preload" as="image" href="/logo_Tlocompro.webp" type="image/webp" fetchpriority="high">

      <!-- JSON-LD: Organizaci√≥n y negocio -->
      <script type="application/ld+json" set:html={JSON.stringify({
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "Tlocompro",
        "url": "https://tlocompro.cl",
        "logo": "https://tlocompro.cl/logo_Tlocompro.webp",
        "sameAs": [
          "https://tlocompro.cl",
          "https://www.instagram.com/tlocompro_cl",
          "https://www.facebook.com/tlocompro.cl"
        ],
        "contactPoint": {
          "@type": "ContactPoint",
          "telephone": "+56 9 5817 0156",
          "contactType": "customer service",
          "areaServed": "CL",
          "availableLanguage": ["Spanish"]
        }
      })} />

      <!-- Slot para metas y scripts adicionales -->
      <slot name="head" />

      <!-- üîπ Google Analytics 4 diferido -->
      <script>
        // @ts-ignore
        let analyticsLoaded = false;
        function loadGA4() {
          if (analyticsLoaded) return;
          analyticsLoaded = true;

          const s = document.createElement('script');
          s.src = "https://www.googletagmanager.com/gtag/js?id=G-N0DXKQ4V53";
          s.async = true;
          document.head.appendChild(s);

          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-N0DXKQ4V53', { send_page_view: true });
        }

        // Carga GA4 s√≥lo cuando el usuario interact√∫e
        window.addEventListener('scroll', loadGA4, { once: true });
        window.addEventListener('mousemove', loadGA4, { once: true });
      </script>

    </head>


  <body class="min-h-screen bg-white text-gray-900 font-sans">
    <!-- NAVBAR -->
    <header class="w-full border-b border-gray-200 bg-white">
  <div class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">

    <!-- LOGO -->
    <a href="/" class="flex items-center gap-2">
      <img 
        src="/logo_Tlocompro.webp"
        alt="Tlocompro"
        width="389"
        height="70"
        class="h-8 w-auto"
        loading="lazy"
        decoding="async"
      />
    </a>

    <!-- MEN√ö DESKTOP -->
    <nav class="hidden md:flex items-center gap-8 text-sm font-medium">

      <a href="/como-funciona" class="hover:text-teal-700 transition">
        C√≥mo funciona
      </a>

      <a href="/preguntas-frecuentes" class="hover:text-teal-700 transition">
        Preguntas frecuentes
      </a>

      <!-- AUTOMOTORAS DESTACADO -->
      <a 
        href="/automotoras" 
        class="text-teal-700 font-semibold hover:text-teal-800 transition"
      >
        Automotoras
      </a>

      <!-- CTA -->
      <a 
        href="/oferta"
        class="bg-teal-700 hover:bg-teal-800 text-white px-5 py-2 rounded-xl shadow-md transition"
      >
        Recibir oferta r√°pida
      </a>

    </nav>

    <!-- MEN√ö MOBILE (bot√≥n hamburguesa) -->
    <button id="menuBtn" class="md:hidden flex items-center text-gray-700">
      <svg class="w-7 h-7" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </button>
  </div>

  <!-- MEN√ö MOBILE DESPLEGABLE -->
  <nav id="mobileMenu" class="md:hidden hidden border-t border-gray-200 bg-white">
    <ul class="flex flex-col py-4 px-4 text-sm font-medium">

      <li>
        <a href="/como-funciona" class="py-2 block hover:text-teal-700">
          C√≥mo funciona
        </a>
      </li>

      <li>
        <a href="/preguntas-frecuentes" class="py-2 block hover:text-teal-700">
          Preguntas frecuentes
        </a>
      </li>

      <!-- AUTOMOTORAS DESTACADO EN MOBILE -->
      <li>
        <a 
          href="/automotoras" 
          class="py-2 block text-teal-700 font-semibold hover:text-teal-800"
        >
          Automotoras
        </a>
      </li>

      <!-- CTA MOBILE -->
      <li class="mt-2">
        <a 
          href="/oferta"
          class="block text-center bg-teal-700 hover:bg-teal-800 text-white px-4 py-3 rounded-xl shadow-md"
        >
          Recibir oferta r√°pida
        </a>
      </li>

    </ul>
  </nav>

  <!-- SCRIPT MENU MOBILE -->
  <script>
    const btn = document.getElementById('menuBtn');
    const menu = document.getElementById('mobileMenu');
    btn.addEventListener('click', () => {
      menu.classList.toggle('hidden');
    });
  </script>
</header>

    <!-- CONTENIDO -->
    <main>
      <slot />
    </main>

    <!-- FOOTER -->
    <footer class="bg-[#121212] text-white py-12 mt-16 border-t border-gray-800">
      <div class="max-w-6xl mx-auto px-4 grid md:grid-cols-3 gap-12">

        <!-- COLUMNA 1 ‚Äì LOGO + TEXTO -->
        <div>
          <div class="flex items-center gap-2 mb-3">
            <img
              src="/logo_Tlocompro.webp"
              alt="Logo de Tlocompro"
              width="389"
              height="70"
              class="h-8 w-auto"
              loading="lazy"
              decoding="async"
            />
          </div>

          <p class="text-sm text-gray-300">
            Compramos tu auto r√°pido, seguro y con pago inmediato.
          </p>
        </div>

        <!-- COLUMNA 2 ‚Äì ENLACES (incluye Automotoras) -->
        <div>
          <h3 class="font-semibold mb-3">Enlaces</h3>
          <ul class="space-y-2 text-sm text-gray-200">
            <li><a href="/como-funciona" class="hover:text-white transition">C√≥mo funciona</a></li>
            <li><a href="/preguntas-frecuentes" class="hover:text-white transition">Preguntas frecuentes</a></li>
            <li><a href="/privacidad" class="hover:text-white transition">Privacidad</a></li>
            <li><a href="/terminos" class="hover:text-white transition">T√©rminos de uso</a></li>

            <!-- NUEVO ENLACE PARA AUTOMOTORAS -->
            <li class="pt-3 mt-3 border-t border-gray-700">
              <a href="/automotoras" class="text-teal-400 font-semibold hover:text-teal-300 transition">
                ¬øEres automotora?
              </a>
            </li>
          </ul>
        </div>

        <!-- COLUMNA 3 ‚Äì CONTACTO -->
        <div>
          <h3 class="font-semibold mb-3">Contacto</h3>
          <ul class="space-y-2 text-sm text-gray-300">
            <li>
              <span class="font-semibold">Email:</span>
              <a href="mailto:contacto@tlocompro.cl" class="hover:text-white transition">
                contacto@tlocompro.cl
              </a>
            </li>
            <li>
              <span class="font-semibold">Tel√©fono:</span>
              <a href="tel:+56958170156" class="hover:text-white transition">
                +569 5817 0156
              </a>
            </li>
          </ul>
        </div>

      </div>

      <!-- COPYRIGHT -->
      <div class="text-center text-xs text-gray-400 mt-12">
        ¬© {new Date().getFullYear()} Tlocompro. Todos los derechos reservados.
      </div>
    </footer>

  </body>
</html>


